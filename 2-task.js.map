{"version":3,"file":"2-task.js","sources":["../src/js/2-task.js"],"sourcesContent":["import axios from 'axios';\n\n// Створи фільмотеку з популярними фільмами, для цього використай\n// https://developer.themoviedb.org/reference/trending-movies\n\n// Щоб отримати постер фільму потрібно підставити url з відповіді від бекенду та url з документації\n// https://developer.themoviedb.org/docs/image-basics\n\n// Відмалюй картки з фільмами\n// Приклад картки  => https://prnt.sc/Hi_iLLg7Nd1F\n\n// Реалізуй пагінацію кнопкою \"Load More\"\n\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst END_POINT = '/trending/movie/week';\nconst API_KEY = '17b255e445f4b5417effc585e89e7d25';\n\nconst container = document.querySelector('.js-movie-list');\nconst loadMore = document.querySelector('.js-load-more');\n\nloadMore.addEventListener('click', onLoadMore);\n\nlet page = 1;\n\nasync function serviceMovie(page = 1) {\n  const { data } = await axios(`${BASE_URL}${END_POINT}`, {\n    params: {\n      api_key: API_KEY,\n      page,\n    },\n  });\n\n  return data;\n}\n\nserviceMovie()\n  .then(data => {\n    container.insertAdjacentHTML('beforeend', createMarkup(data.results));\n\n    if (data.page < data.total_pages) {\n      loadMore.classList.replace('load-more-hidden', 'load-more');\n    }\n  })\n  .catch(error => alert(error.message));\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({ poster_path, release_date, original_title, vote_average }) => `\n        <li class=\"movie-card\">\n            <img src=\"https://image.tmdb.org/t/p/w300${poster_path}\" alt=\"${original_title}\">\n            <div class=\"movie-info\">\n                <h2>${original_title}</h2>\n                <p>Release Date: ${release_date}</p>\n                <p>Vote Average: ${vote_average}</p>\n            </div>\n        </li>\n    `\n    )\n    .join('');\n}\n\nasync function onLoadMore() {\n  page += 1;\n  loadMore.disabled = true;\n\n  try {\n    const data = await serviceMovie(page);\n    container.insertAdjacentHTML('beforeend', createMarkup(data.results));\n\n    if (data.page >= data.total_pages) {\n      loadMore.classList.replace('load-more', 'load-more-hidden');\n    }\n\n    const card = document.querySelector('.movie-card');\n    const cardHeight = card.getBoundingClientRect().height;\n\n    window.scrollBy({\n      left: 0,\n      top: cardHeight,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    alert(error.message);\n  } finally {\n    loadMore.disabled = false;\n  }\n}\n"],"names":["BASE_URL","END_POINT","API_KEY","container","loadMore","onLoadMore","page","serviceMovie","data","axios","createMarkup","error","arr","poster_path","release_date","original_title","vote_average","cardHeight"],"mappings":"wIAaA,MAAMA,EAAW,+BACXC,EAAY,uBACZC,EAAU,mCAEVC,EAAY,SAAS,cAAc,gBAAgB,EACnDC,EAAW,SAAS,cAAc,eAAe,EAEvDA,EAAS,iBAAiB,QAASC,CAAU,EAE7C,IAAIC,EAAO,EAEX,eAAeC,EAAaD,EAAO,EAAG,CACpC,KAAM,CAAE,KAAAE,CAAM,EAAG,MAAMC,EAAM,GAAGT,CAAQ,GAAGC,CAAS,GAAI,CACtD,OAAQ,CACN,QAASC,EACT,KAAAI,CACD,CACL,CAAG,EAED,OAAOE,CACT,CAEAD,EAAc,EACX,KAAKC,GAAQ,CACZL,EAAU,mBAAmB,YAAaO,EAAaF,EAAK,OAAO,CAAC,EAEhEA,EAAK,KAAOA,EAAK,aACnBJ,EAAS,UAAU,QAAQ,mBAAoB,WAAW,CAEhE,CAAG,EACA,MAAMO,GAAS,MAAMA,EAAM,OAAO,CAAC,EAEtC,SAASD,EAAaE,EAAK,CACzB,OAAOA,EACJ,IACC,CAAC,CAAE,YAAAC,EAAa,aAAAC,EAAc,eAAAC,EAAgB,aAAAC,CAAc,IAAK;AAAA;AAAA,uDAEhBH,CAAW,UAAUE,CAAc;AAAA;AAAA,sBAEpEA,CAAc;AAAA,mCACDD,CAAY;AAAA,mCACZE,CAAY;AAAA;AAAA;AAAA,KAI1C,EACA,KAAK,EAAE,CACZ,CAEA,eAAeX,GAAa,CAC1BC,GAAQ,EACRF,EAAS,SAAW,GAEpB,GAAI,CACF,MAAMI,EAAO,MAAMD,EAAaD,CAAI,EACpCH,EAAU,mBAAmB,YAAaO,EAAaF,EAAK,OAAO,CAAC,EAEhEA,EAAK,MAAQA,EAAK,aACpBJ,EAAS,UAAU,QAAQ,YAAa,kBAAkB,EAI5D,MAAMa,EADO,SAAS,cAAc,aAAa,EACzB,sBAAqB,EAAG,OAEhD,OAAO,SAAS,CACd,KAAM,EACN,IAAKA,EACL,SAAU,QAChB,CAAK,CACF,OAAQN,EAAO,CACd,MAAMA,EAAM,OAAO,CACvB,QAAY,CACRP,EAAS,SAAW,EACrB,CACH"}